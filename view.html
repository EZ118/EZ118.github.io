<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<link rel="shortcut icon" href="./img/icon.png">
		<link rel="stylesheet" type="text/css" href="./markup/mark.css">
		<title>Viewer</title>
		<style>
			h2{margin:4px;}
			h3{margin:4px;}
		</style>
	</head>
	<body>
		
		<div id=bd>Loading Now, Please Wait ...</div>
	
		<script>
			function $GET(name){
				var reg = new RegExp('(^|&)'+name+'=([^&]*)(&|$)', 'i');
				var r = window.location.search.substr(1).match(reg);
				if (r != null)
				{
					return unescape(r[2]);
				}
				return "";
			}
			
			function loadtext() {
				var xhttp = new XMLHttpRequest();
				xhttp.onreadystatechange = function() {
					if (this.readyState == 4 && this.status == 200) {
						var cnt = 0;
						var str = this.responseText;
						for(var i = 1; i <= str.length; i ++){if(str[i] == "\n") cnt ++}
						str = str.split("\n");
							
						for(var i = 1; i <= cnt; i ++) {
							var tmp = str[i];
							tmp = tmp.split("\t");
							
							if(tmp[0] == $GET("id")) {
								tmp[3] = tmp[3].replace(/(^\"+|\"+$)/mg, '').replace(/\"\"/g, '\"');
								document.getElementById("bd").innerHTML = '<h2 align="left">标题：' + tmp[2] + '</h2>\
									<h3 align="left">作者：' + tmp[1] + '</h3>\
									<div align="left" style="font-size:16;margin:4px;">' + tmp[3] + '</div>';
								break;
							}
						}
					}
				};
				xhttp.open("GET", "info.txt", true);
				xhttp.send(); 
			}
			
			loadtext();
		</script>
		
	</body>
</html>
